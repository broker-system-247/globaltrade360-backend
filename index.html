<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlobalTrade360 - Premium Crypto & Forex Platform</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/000000/bitcoin--v1.png">
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gold: #FFD700;
            --secondary-gold: #FFC107;
            --dark-gold: #D4AF37;
            --light-gold: #FFF8DC;
            --dark-bg: #0A0E17;
            --card-bg: #1A1F2E;
            --success: #00C9A7;
            --danger: #FF6B6B;
            --info: #4ECDC4;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0A0E17 0%, #1A1F2E 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .gold-gradient {
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gold-bg-gradient {
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
        }
        
        .nav-glass {
            background: rgba(10, 14, 23, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 215, 0, 0.1);
        }
        
        .glass-card {
            background: rgba(26, 31, 46, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.1);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-gold);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.1);
        }
        
        .btn-gold {
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
            color: #000;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
        }
        
        .profit-badge {
            background: linear-gradient(135deg, var(--success), #00ffaa);
            color: #000;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.8rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 201, 167, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 201, 167, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 201, 167, 0); }
        }
        
        .live-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            animation: slideInRight 0.5s ease;
            max-width: 350px;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .crypto-price {
            font-family: 'Courier New', monospace;
            color: var(--success);
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .gold-border {
            border: 2px solid var(--primary-gold);
        }
        
        .hero-section {
            min-height: 100vh;
            padding-top: 100px;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%);
        }
        
        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        
        .investment-plan {
            position: relative;
            overflow: hidden;
        }
        
        .investment-plan.featured::after {
            content: 'FEATURED';
            position: absolute;
            top: 20px;
            right: -30px;
            background: var(--primary-gold);
            color: #000;
            padding: 5px 30px;
            transform: rotate(45deg);
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .ai-chat-bubble {
            max-width: 70%;
            margin: 10px;
            padding: 15px;
            border-radius: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .user-message {
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
            color: #000;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .ai-message {
            background: var(--card-bg);
            color: white;
            border-bottom-left-radius: 5px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .deposit-address {
            font-family: 'Courier New', monospace;
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 10px;
            font-size: 0.9rem;
            word-break: break-all;
            border: 1px solid var(--primary-gold);
        }
        
        .profit-animation {
            position: absolute;
            color: var(--success);
            font-weight: bold;
            font-size: 1.2rem;
            animation: floatUp 3s ease-in-out forwards;
            z-index: 100;
        }
        
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100px); opacity: 0; }
        }
        
        .trust-badge {
            filter: grayscale(100%);
            transition: all 0.3s ease;
            opacity: 0.7;
        }
        
        .trust-badge:hover {
            filter: grayscale(0%);
            opacity: 1;
            transform: scale(1.05);
        }
        
        .section-title {
            position: relative;
            display: inline-block;
            margin-bottom: 50px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
            border-radius: 2px;
        }
        
        .floating-shape {
            position: absolute;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            z-index: -1;
        }
        
        .stat-card {
            text-align: center;
            padding: 30px;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        
        .nav-link {
            position: relative;
            color: #fff !important;
            margin: 0 10px;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            color: var(--primary-gold) !important;
        }
        
        .nav-link.active {
            color: var(--primary-gold) !important;
        }
        
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--dark-bg);
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-gold), var(--dark-gold));
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--dark-gold), var(--primary-gold));
        }
    </style>
</head>
<body>
    <!-- Floating Background Shapes -->
    <div class="floating-shape" style="top: 10%; left: 5%;"></div>
    <div class="floating-shape" style="bottom: 10%; right: 5%; width: 200px; height: 200px;"></div>
    
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark nav-glass fixed-top py-3">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <i class="fas fa-crown me-2" style="color: var(--primary-gold); font-size: 1.5rem;"></i>
                <span class="fw-bold fs-4 gold-gradient">GlobalTrade360</span>
                <span class="badge gold-bg-gradient ms-2" style="color: #000;">PRO</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#markets">Markets</a></li>
                    <li class="nav-item"><a class="nav-link" href="#invest">Invest</a></li>
                    <li class="nav-item"><a class="nav-link" href="#ai-trade">AI Trade</a></li>
                    <li class="nav-item"><a class="nav-link" href="#testimonials">Success</a></li>
                    <li class="nav-item">
                        <button class="btn btn-outline-gold me-2" onclick="showAuthModal('login')" id="loginBtn">
                            <i class="fas fa-sign-in-alt me-2"></i>Login
                        </button>
                        <button class="btn btn-gold" onclick="showAuthModal('register')" id="registerBtn">
                            <i class="fas fa-user-plus me-2"></i>Register
                        </button>
                        <div class="dropdown d-inline ms-2" id="userDropdown" style="display:none;">
                            <button class="btn btn-success dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                <i class="fas fa-user me-1"></i> <span id="usernameDisplay"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="showDashboard()"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a></li>
                                <li><a class="dropdown-item" href="#" onclick="showWallet()"><i class="fas fa-wallet me-2"></i>Wallet</a></li>
                                <li><a class="dropdown-item" href="#" onclick="showInvestments()"><i class="fas fa-chart-pie me-2"></i>Investments</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" onclick="logout()"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                            </ul>
                        </div>
                        <div class="dropdown d-inline ms-2" id="adminDropdown" style="display:none;">
                            <button class="btn gold-bg-gradient dropdown-toggle" type="button" data-bs-toggle="dropdown" style="color: #000;">
                                <i class="fas fa-crown me-1"></i> Admin
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="showAdminPanel()"><i class="fas fa-sliders-h me-2"></i>Admin Panel</a></li>
                                <li><a class="dropdown-item" href="#" onclick="showUserManagement()"><i class="fas fa-users me-2"></i>User Management</a></li>
                                <li><a class="dropdown-item" href="#" onclick="showCryptoAddresses()"><i class="fab fa-bitcoin me-2"></i>Crypto Addresses</a></li>
                                <li><a class="dropdown-item" href="#" onclick="showEmailSystem()"><i class="fas fa-envelope me-2"></i>Email System</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Live Notifications -->
    <div id="liveNotifications"></div>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-5 mb-lg-0">
                    <h1 class="display-4 fw-bold mb-4 animate__animated animate__fadeInUp">
                        <span class="gold-gradient">Premium Crypto & Forex</span> Investment Platform
                    </h1>
                    <p class="lead mb-4">Join thousands of successful investors using our AI-powered trading system. Automated profits, secure investments, and 24/7 professional support.</p>
                    <div class="d-flex flex-wrap gap-3 mb-4">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-shield-alt text-success me-2"></i>
                            <span>Licensed & Regulated</span>
                        </div>
                        <div class="d-flex align-items-center">
                            <i class="fas fa-bolt text-warning me-2"></i>
                            <span>Instant Withdrawals</span>
                        </div>
                        <div class="d-flex align-items-center">
                            <i class="fas fa-robot text-info me-2"></i>
                            <span>AI Trading Assistant</span>
                        </div>
                    </div>
                    <button class="btn btn-gold btn-lg me-3" onclick="showAuthModal('register')">
                        <i class="fas fa-rocket me-2"></i>Start Investing Now
                    </button>
                    <button class="btn btn-outline-light btn-lg" onclick="showDemo()">
                        <i class="fas fa-play-circle me-2"></i>Live Demo
                    </button>
                </div>
                <div class="col-lg-6">
                    <div class="glass-card p-4">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="mb-0 gold-gradient">Live Market</h4>
                            <span class="badge bg-danger">LIVE</span>
                        </div>
                        <div class="trading-view mb-4" id="tradingChart" style="height: 300px;">
                            <!-- Chart will be injected here -->
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="glass-card p-3">
                                    <div class="d-flex justify-content-between">
                                        <span>BTC/USD</span>
                                        <span class="crypto-price" id="btcPrice">$63,842.15</span>
                                    </div>
                                    <small class="text-success"><i class="fas fa-arrow-up me-1"></i>+2.4%</small>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="glass-card p-3">
                                    <div class="d-flex justify-content-between">
                                        <span>ETH/USD</span>
                                        <span class="crypto-price" id="ethPrice">$3,215.67</span>
                                    </div>
                                    <small class="text-success"><i class="fas fa-arrow-up me-1"></i>+1.8%</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-6 mb-4">
                    <div class="glass-card stat-card">
                        <div class="stat-number">$4.2B+</div>
                        <p class="text-muted mb-0">Total Volume</p>
                    </div>
                </div>
                <div class="col-md-3 col-6 mb-4">
                    <div class="glass-card stat-card">
                        <div class="stat-number">50K+</div>
                        <p class="text-muted mb-0">Active Traders</p>
                    </div>
                </div>
                <div class="col-md-3 col-6 mb-4">
                    <div class="glass-card stat-card">
                        <div class="stat-number">89%</div>
                        <p class="text-muted mb-0">Success Rate</p>
                    </div>
                </div>
                <div class="col-md-3 col-6 mb-4">
                    <div class="glass-card stat-card">
                        <div class="stat-number">24/7</div>
                        <p class="text-muted mb-0">Support</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Investment Plans -->
    <section id="invest" class="py-5">
        <div class="container">
            <h2 class="section-title fw-bold">Investment Plans</h2>
            <p class="text-muted mb-5 text-center">Choose from our proven profitable investment strategies</p>
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="glass-card p-4 h-100 investment-plan">
                        <div class="text-center mb-4">
                            <i class="fas fa-star fa-3x gold-gradient mb-3"></i>
                            <h4>Basic Plan</h4>
                            <h2 class="gold-gradient">3.2% <small class="text-muted">Daily</small></h2>
                        </div>
                        <ul class="list-unstyled mb-4">
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Minimum: $500</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Maximum: $5,000</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Duration: 30 Days</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Capital Return: Yes</li>
                        </ul>
                        <button class="btn btn-gold w-100" onclick="investNow('basic')">Invest Now</button>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="glass-card p-4 h-100 investment-plan featured gold-border">
                        <div class="text-center mb-4">
                            <span class="badge gold-bg-gradient mb-2" style="color: #000;">MOST POPULAR</span>
                            <i class="fas fa-crown fa-3x gold-gradient mb-3"></i>
                            <h4>Pro Plan</h4>
                            <h2 class="gold-gradient">4.8% <small class="text-muted">Daily</small></h2>
                        </div>
                        <ul class="list-unstyled mb-4">
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Minimum: $5,000</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Maximum: $50,000</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Duration: 60 Days</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Capital Return: Yes</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>AI Trading Signals</li>
                        </ul>
                        <button class="btn btn-gold w-100" onclick="investNow('pro')">Invest Now</button>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="glass-card p-4 h-100 investment-plan">
                        <div class="text-center mb-4">
                            <i class="fas fa-rocket fa-3x gold-gradient mb-3"></i>
                            <h4>VIP Plan</h4>
                            <h2 class="gold-gradient">7.5% <small class="text-muted">Daily</small></h2>
                        </div>
                        <ul class="list-unstyled mb-4">
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Minimum: $50,000</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Maximum: Unlimited</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Duration: 90 Days</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>24/7 Personal Manager</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Priority Withdrawals</li>
                        </ul>
                        <button class="btn btn-gold w-100" onclick="investNow('vip')">Invest Now</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Trading Section -->
    <section id="ai-trade" class="py-5">
        <div class="container">
            <div class="glass-card p-5">
                <div class="row align-items-center">
                    <div class="col-lg-6 mb-4 mb-lg-0">
                        <h2 class="fw-bold mb-4 gold-gradient">AI Trading Assistant</h2>
                        <p class="mb-4">Our advanced AI analyzes market trends 24/7 to provide you with optimal trading signals. Get real-time buy/sell recommendations.</p>
                        <div class="mb-4">
                            <div class="d-flex align-items-center mb-3">
                                <div class="feature-icon">
                                    <i class="fas fa-brain"></i>
                                </div>
                                <div>
                                    <h5 class="mb-1">Market Analysis</h5>
                                    <p class="text-muted mb-0">Real-time pattern recognition</p>
                                </div>
                            </div>
                            <div class="d-flex align-items-center mb-3">
                                <div class="feature-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div>
                                    <h5 class="mb-1">Trade Signals</h5>
                                    <p class="text-muted mb-0">Precise entry & exit points</p>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-gold" onclick="showAIChat()">
                            <i class="fas fa-robot me-2"></i>Chat with AI Assistant
                        </button>
                    </div>
                    <div class="col-lg-6">
                        <div class="glass-card p-4">
                            <h5 class="mb-3 gold-gradient">Today's AI Recommendations</h5>
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span>BTC/USD</span>
                                    <span class="badge bg-success">STRONG BUY</span>
                                </div>
                                <div class="progress" style="height: 8px; background: rgba(255,255,255,0.1);">
                                    <div class="progress-bar gold-bg-gradient" style="width: 85%"></div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span>ETH/USD</span>
                                    <span class="badge bg-warning">HOLD</span>
                                </div>
                                <div class="progress" style="height: 8px; background: rgba(255,255,255,0.1);">
                                    <div class="progress-bar bg-warning" style="width: 60%"></div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span>EUR/USD</span>
                                    <span class="badge bg-danger">SELL</span>
                                </div>
                                <div class="progress" style="height: 8px; background: rgba(255,255,255,0.1);">
                                    <div class="progress-bar bg-danger" style="width: 40%"></div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <h6>AI Confidence Level: <span class="text-success">92%</span></h6>
                                <p class="small text-muted">Based on 1,200+ data points and market indicators</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section id="testimonials" class="py-5">
        <div class="container">
            <h2 class="section-title fw-bold">Client Success Stories</h2>
            <p class="text-muted mb-5 text-center">See what our investors are saying</p>
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="glass-card p-4 h-100">
                        <div class="d-flex align-items-center mb-3">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" class="rounded-circle me-3" width="50" alt="Client">
                            <div>
                                <h5 class="mb-0 gold-gradient">Michael Rodriguez</h5>
                                <small class="text-muted">Professional Trader</small>
                            </div>
                        </div>
                        <p class="mb-3">"Made $45,000 in my first month. The AI signals are incredibly accurate!"</p>
                        <div class="text-warning">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="glass-card p-4 h-100">
                        <div class="d-flex align-items-center mb-3">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" class="rounded-circle me-3" width="50" alt="Client">
                            <div>
                                <h5 class="mb-0 gold-gradient">Sarah Johnson</h5>
                                <small class="text-muted">Business Owner</small>
                            </div>
                        </div>
                        <p class="mb-3">"Withdrew $120,000 profit last week. Platform is reliable and withdrawals are instant."</p>
                        <div class="text-warning">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="glass-card p-4 h-100">
                        <div class="d-flex align-items-center mb-3">
                            <img src="https://randomuser.me/api/portraits/men/65.jpg" class="rounded-circle me-3" width="50" alt="Client">
                            <div>
                                <h5 class="mb-0 gold-gradient">David Chen</h5>
                                <small class="text-muted">Investor</small>
                            </div>
                        </div>
                        <p class="mb-3">"The automated trading has generated consistent 4-7% daily returns. Highly recommend!"</p>
                        <div class="text-warning">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Trust Badges -->
    <section class="py-5">
        <div class="container">
            <div class="glass-card p-5">
                <div class="row text-center">
                    <div class="col-md-3 mb-4">
                        <img src="https://img.icons8.com/color/96/000000/ssl-logo.png" class="trust-badge" alt="SSL Secure">
                        <p class="mt-2">256-bit SSL Encryption</p>
                    </div>
                    <div class="col-md-3 mb-4">
                        <img src="https://img.icons8.com/color/96/000000/security-checked.png" class="trust-badge" alt="Licensed">
                        <p class="mt-2">FCA Licensed</p>
                    </div>
                    <div class="col-md-3 mb-4">
                        <img src="https://img.icons8.com/color/96/000000/firewall.png" class="trust-badge" alt="Protected">
                        <p class="mt-2">Funds Protected</p>
                    </div>
                    <div class="col-md-3 mb-4">
                        <img src="https://img.icons8.com/color/96/000000/cyber-security.png" class="trust-badge" alt="Insurance">
                        <p class="mt-2">$1M Insurance</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-5 border-top border-secondary">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5 class="fw-bold mb-3 gold-gradient">GlobalTrade360</h5>
                    <p>Professional crypto and forex investment platform with AI-powered trading and automated profits.</p>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-light"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-telegram fa-lg"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-linkedin fa-lg"></i></a>
                    </div>
                </div>
                <div class="col-md-2 mb-4">
                    <h6 class="fw-bold mb-3">Platform</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#markets" class="text-light text-decoration-none">Markets</a></li>
                        <li class="mb-2"><a href="#invest" class="text-light text-decoration-none">Investment Plans</a></li>
                        <li class="mb-2"><a href="#ai-trade" class="text-light text-decoration-none">AI Trading</a></li>
                        <li class="mb-2"><a href="#" onclick="showSupport()" class="text-light text-decoration-none">Support</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h6 class="fw-bold mb-3">Legal</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-light text-decoration-none">Terms of Service</a></li>
                        <li class="mb-2"><a href="#" class="text-light text-decoration-none">Privacy Policy</a></li>
                        <li class="mb-2"><a href="#" class="text-light text-decoration-none">Risk Disclosure</a></li>
                        <li class="mb-2"><a href="#" class="text-light text-decoration-none">AML Policy</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h6 class="fw-bold mb-3">Contact</h6>
                    <p><i class="fas fa-envelope me-2 gold-gradient"></i>support@globaltrade360.com</p>
                    <p><i class="fas fa-envelope me-2 gold-gradient"></i>stevenlogan362@gmail.com</p>
                    <p class="small text-muted">24/7 Support Available</p>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center">
                <p class="mb-0">Â© 2024 GlobalTrade360. All rights reserved. Licensed & Regulated.</p>
                <p class="small text-muted mt-2">CFDs are complex instruments and come with a high risk of losing money rapidly due to leverage. 78% of retail investor accounts lose money when trading CFDs.</p>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Auth Modal -->
    <div class="modal fade" id="authModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content glass-card">
                <div class="modal-header border-0">
                    <h5 class="modal-title gold-gradient" id="authModalTitle">Login to Your Account</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="authForms">
                        <!-- Login Form -->
                        <form id="loginForm" style="display: none;">
                            <div class="mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control bg-dark text-light border-secondary" id="loginEmail" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Password</label>
                                <input type="password" class="form-control bg-dark text-light border-secondary" id="loginPassword" required>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="rememberMe">
                                <label class="form-check-label">Remember me</label>
                            </div>
                            <button type="submit" class="btn btn-gold w-100">Login</button>
                            <p class="text-center mt-3">
                                Don't have an account? 
                                <a href="#" class="text-warning" onclick="switchAuthForm('register')">Register</a>
                            </p>
                        </form>

                        <!-- Register Form -->
                        <form id="registerForm" style="display: none;">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">First Name</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="firstName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Last Name</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="lastName" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control bg-dark text-light border-secondary" id="registerEmail" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Password</label>
                                <input type="password" class="form-control bg-dark text-light border-secondary" id="registerPassword" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Confirm Password</label>
                                <input type="password" class="form-control bg-dark text-light border-secondary" id="confirmPassword" required>
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="acceptTerms" required>
                                <label class="form-check-label">I agree to Terms & Conditions</label>
                            </div>
                            <button type="submit" class="btn btn-gold w-100">Create Account</button>
                            <p class="text-center mt-3">
                                Already have an account? 
                                <a href="#" class="text-warning" onclick="switchAuthForm('login')">Login</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Modal -->
    <div class="modal fade" id="dashboardModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content glass-card">
                <div class="modal-header border-0">
                    <h5 class="modal-title gold-gradient">Investment Dashboard</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="glass-card p-3 text-center">
                                <small class="text-muted">Total Balance</small>
                                <h3 class="gold-gradient mb-0" id="totalBalance">$0.00</h3>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="glass-card p-3 text-center">
                                <small class="text-muted">Active Investments</small>
                                <h3 class="text-primary mb-0" id="activeInvestments">0</h3>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="glass-card p-3 text-center">
                                <small class="text-muted">Total Profit</small>
                                <h3 class="text-success mb-0" id="totalProfit">$0.00</h3>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="glass-card p-3 text-center">
                                <small class="text-muted">Today's Profit</small>
                                <h3 class="text-success mb-0" id="todayProfit">$0.00</h3>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h5>Deposit Funds</h5>
                        <div class="glass-card p-4">
                            <div class="mb-3">
                                <label class="form-label">Amount ($)</label>
                                <input type="number" class="form-control bg-dark text-light border-secondary" id="depositAmount" min="100">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Select Currency</label>
                                <select class="form-select bg-dark text-light border-secondary" id="depositCurrency">
                                    <option value="BTC">Bitcoin (BTC)</option>
                                    <option value="ETH">Ethereum (ETH)</option>
                                    <option value="USDT">USDT (TRC20)</option>
                                    <option value="USDC">USDC</option>
                                </select>
                            </div>
                            <div id="cryptoAddresses">
                                <!-- Crypto addresses will be loaded here -->
                            </div>
                            <button class="btn btn-gold mt-3" onclick="processDeposit()">Generate Deposit Address</button>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h5>Withdraw Funds</h5>
                        <div class="glass-card p-4">
                            <div class="mb-3">
                                <label class="form-label">Amount ($)</label>
                                <input type="number" class="form-control bg-dark text-light border-secondary" id="withdrawAmount">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Wallet Address</label>
                                <input type="text" class="form-control bg-dark text-light border-secondary" id="withdrawWallet" placeholder="Enter your crypto wallet address">
                            </div>
                            <button class="btn btn-success" onclick="processWithdrawal()">Request Withdrawal</button>
                        </div>
                    </div>

                    <div>
                        <h5>Investment History</h5>
                        <div class="glass-card p-3">
                            <div class="table-responsive">
                                <table class="table table-dark table-hover">
                                    <thead>
                                        <tr>
                                            <th>Plan</th>
                                            <th>Amount</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                            <th>Profit</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="investmentHistory">
                                        <!-- Investment history will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Chat Modal -->
    <div class="modal fade" id="aiChatModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content glass-card">
                <div class="modal-header border-0">
                    <h5 class="modal-title gold-gradient"><i class="fas fa-robot me-2"></i>AI Trading Assistant</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="chat-container" style="height: 400px; overflow-y: auto;" id="chatMessages">
                        <div class="ai-message ai-chat-bubble mb-3">
                            <strong>AI Assistant:</strong> Hello! I'm your AI trading assistant. I can help you with investment advice, market analysis, or answer any questions about our platform. How can I assist you today?
                        </div>
                    </div>
                    <div class="input-group mt-3">
                        <input type="text" class="form-control bg-dark text-light border-secondary" id="chatInput" placeholder="Type your message...">
                        <button class="btn btn-gold" onclick="sendAIMessage()">Send</button>
                    </div>
                    <div class="mt-3">
                        <small class="text-muted">Need support? Type "support" or describe your issue. Admin will contact you at your registered email.</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div class="modal fade" id="adminPanelModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content glass-card">
                <div class="modal-header border-0">
                    <h5 class="modal-title gold-gradient"><i class="fas fa-crown me-2"></i>Admin Control Panel</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs mb-4">
                        <li class="nav-item">
                            <button class="nav-link active" onclick="showAdminTab('crypto')">Crypto Addresses</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" onclick="showAdminTab('users')">User Management</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" onclick="showAdminTab('email')">Email System</button>
                        </li>
                    </ul>

                    <div id="adminCryptoTab">
                        <h5 class="gold-gradient">Manage Crypto Deposit Addresses</h5>
                        <div class="glass-card p-4 mb-4">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Bitcoin (BTC) Address</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="adminBtcAddress">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Ethereum (ETH) Address</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="adminEthAddress">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">USDT (TRC20) Address</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="adminUsdtAddress">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">USDC Address</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="adminUsdcAddress">
                                </div>
                            </div>
                            <button class="btn btn-gold" onclick="saveCryptoAddresses()">Save Addresses</button>
                        </div>
                    </div>

                    <div id="adminUsersTab" style="display: none;">
                        <h5 class="gold-gradient">User Management</h5>
                        <div class="glass-card p-3">
                            <div class="table-responsive">
                                <table class="table table-dark table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Balance</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTable">
                                        <!-- Users will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="adminEmailTab" style="display: none;">
                        <h5 class="gold-gradient">Email System</h5>
                        <div class="glass-card p-4">
                            <div class="mb-3">
                                <label class="form-label">Select User</label>
                                <select class="form-select bg-dark text-light border-secondary" id="emailUserSelect">
                                    <option value="all">All Users</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Subject</label>
                                <input type="text" class="form-control bg-dark text-light border-secondary" id="emailSubject">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Message</label>
                                <textarea class="form-control bg-dark text-light border-secondary" id="emailMessage" rows="5"></textarea>
                            </div>
                            <button class="btn btn-gold" onclick="sendBulkEmail()">Send Email</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap & Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // Application State
        let currentUser = null;
        let isAdmin = false;
        let marketData = {
            btc: 63842.15,
            eth: 3215.67,
            eur: 1.0824
        };

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            initializeMarketData();
            startLiveNotifications();
            startProfitAccumulation();
            loadCryptoAddresses();
            
            // Form submissions
            document.getElementById('loginForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                loginUser();
            });

            document.getElementById('registerForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                registerUser();
            });
        });

        // Authentication Functions
        function showAuthModal(type) {
            const modal = new bootstrap.Modal(document.getElementById('authModal'));
            modal.show();
            switchAuthForm(type);
        }

        function switchAuthForm(type) {
            if (type === 'login') {
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('registerForm').style.display = 'none';
                document.getElementById('authModalTitle').textContent = 'Login to Your Account';
            } else {
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('registerForm').style.display = 'block';
                document.getElementById('authModalTitle').textContent = 'Create New Account';
            }
        }

        async function loginUser() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;

            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (data.success) {
                    currentUser = data.user;
                    isAdmin = data.user.isAdmin || false;
                    
                    if (rememberMe) {
                        localStorage.setItem('currentUser', JSON.stringify(currentUser));
                        localStorage.setItem('isAdmin', isAdmin);
                    } else {
                        sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                        sessionStorage.setItem('isAdmin', isAdmin);
                    }
                    
                    updateUIAfterLogin();
                    document.getElementById('authModal').querySelector('.btn-close').click();
                    showNotification('success', 'Login successful!');
                } else {
                    showNotification('error', data.error || 'Invalid credentials');
                }
            } catch (error) {
                // Fallback to localStorage if server fails
                handleLocalLogin(email, password, rememberMe);
            }
        }

        function handleLocalLogin(email, password, rememberMe) {
            // Admin login
            if (email === 'globaltrade360' && password === 'myhandwork2025') {
                currentUser = {
                    email: 'admin@globaltrade360.com',
                    name: 'Administrator',
                    isAdmin: true
                };
                isAdmin = true;
                
                if (rememberMe) {
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    localStorage.setItem('isAdmin', 'true');
                }
                updateUIAfterLogin();
                document.getElementById('authModal').querySelector('.btn-close').click();
                showNotification('success', 'Admin login successful!');
                return;
            }

            // Regular user login from localStorage
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                currentUser = user;
                isAdmin = false;
                if (rememberMe) {
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    localStorage.setItem('isAdmin', 'false');
                }
                updateUIAfterLogin();
                document.getElementById('authModal').querySelector('.btn-close').click();
                showNotification('success', 'Login successful!');
            } else {
                showNotification('error', 'Invalid email or password');
            }
        }

        async function registerUser() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (password !== confirmPassword) {
                showNotification('error', 'Passwords do not match');
                return;
            }

            try {
                const response = await fetch('/api/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ firstName, lastName, email, password })
                });

                const data = await response.json();

                if (data.success) {
                    showNotification('success', 'Registration successful! Please login.');
                    switchAuthForm('login');
                } else {
                    showNotification('error', data.error || 'Registration failed');
                }
            } catch (error) {
                // Fallback to localStorage if server fails
                handleLocalRegister(firstName, lastName, email, password);
            }
        }

        function handleLocalRegister(firstName, lastName, email, password) {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            if (users.find(u => u.email === email)) {
                showNotification('error', 'Email already registered');
                return;
            }

            const newUser = {
                id: Date.now(),
                firstName,
                lastName,
                email,
                password,
                balance: 0,
                investments: [],
                transactions: [],
                joinDate: new Date().toISOString()
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            showNotification('success', 'Registration successful! Please login.');
            switchAuthForm('login');
        }

        function checkAuthStatus() {
            const savedUser = localStorage.getItem('currentUser') || sessionStorage.getItem('currentUser');
            const savedAdmin = localStorage.getItem('isAdmin') || sessionStorage.getItem('isAdmin');
            
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                isAdmin = savedAdmin === 'true';
                updateUIAfterLogin();
            }
        }

        function updateUIAfterLogin() {
            if (currentUser) {
                document.getElementById('loginBtn').style.display = 'none';
                document.getElementById('registerBtn').style.display = 'none';
                document.getElementById('usernameDisplay').textContent = currentUser.firstName || currentUser.name;
                
                if (isAdmin) {
                    document.getElementById('adminDropdown').style.display = 'inline-block';
                    document.getElementById('userDropdown').style.display = 'none';
                } else {
                    document.getElementById('userDropdown').style.display = 'inline-block';
                    document.getElementById('adminDropdown').style.display = 'none';
                }
                
                updateDashboardData();
            }
        }

        function logout() {
            currentUser = null;
            isAdmin = false;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('isAdmin');
            sessionStorage.removeItem('currentUser');
            sessionStorage.removeItem('isAdmin');
            
            document.getElementById('loginBtn').style.display = 'inline-block';
            document.getElementById('registerBtn').style.display = 'inline-block';
            document.getElementById('userDropdown').style.display = 'none';
            document.getElementById('adminDropdown').style.display = 'none';
            
            showNotification('info', 'Logged out successfully');
        }

        // Dashboard Functions
        function showDashboard() {
            if (!currentUser) {
                showAuthModal('login');
                return;
            }
            updateDashboardData();
            const modal = new bootstrap.Modal(document.getElementById('dashboardModal'));
            modal.show();
        }

        function updateDashboardData() {
            if (!currentUser) return;

            if (isAdmin) {
                // Admin dashboard data
                document.getElementById('totalBalance').textContent = '$' + getTotalPlatformBalance().toLocaleString();
                document.getElementById('activeInvestments').textContent = getActiveInvestmentsCount();
                document.getElementById('totalProfit').textContent = '$' + getTotalPlatformProfit().toLocaleString();
                document.getElementById('todayProfit').textContent = '$' + getTodayPlatformProfit().toLocaleString();
            } else {
                // User dashboard data
                const userData = getUserData(currentUser.email);
                if (userData) {
                    document.getElementById('totalBalance').textContent = '$' + userData.balance.toLocaleString();
                    document.getElementById('activeInvestments').textContent = userData.investments.filter(i => i.status === 'active').length;
                    document.getElementById('totalProfit').textContent = '$' + calculateTotalProfit(userData).toLocaleString();
                    document.getElementById('todayProfit').textContent = '$' + calculateTodayProfit(userData).toLocaleString();
                    updateInvestmentHistory(userData);
                }
            }
        }

        function getUserData(email) {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            return users.find(u => u.email === email);
        }

        function calculateTotalProfit(user) {
            return user.investments.reduce((total, inv) => total + (inv.profit || 0), 0);
        }

        function calculateTodayProfit(user) {
            const today = new Date().toISOString().split('T')[0];
            return user.transactions
                .filter(t => t.type === 'profit' && t.date.includes(today))
                .reduce((total, t) => total + t.amount, 0);
        }

        function updateInvestmentHistory(user) {
            const historyHtml = user.investments.map(inv => `
                <tr>
                    <td>${inv.plan}</td>
                    <td>$${inv.amount.toLocaleString()}</td>
                    <td>${new Date(inv.startDate).toLocaleDateString()}</td>
                    <td>${new Date(inv.endDate).toLocaleDateString()}</td>
                    <td class="text-success">$${inv.profit?.toLocaleString() || '0'}</td>
                    <td><span class="badge bg-${inv.status === 'active' ? 'success' : 'secondary'}">${inv.status}</span></td>
                </tr>
            `).join('');
            document.getElementById('investmentHistory').innerHTML = historyHtml;
        }

        // Investment Functions
        function investNow(plan) {
            if (!currentUser) {
                showAuthModal('login');
                return;
            }

            const plans = {
                basic: { min: 500, max: 5000, dailyReturn: 0.032 },
                pro: { min: 5000, max: 50000, dailyReturn: 0.048 },
                vip: { min: 50000, max: 9999999, dailyReturn: 0.075 }
            };

            const selectedPlan = plans[plan];
            const amount = parseFloat(prompt(`Enter investment amount ($${selectedPlan.min} - $${selectedPlan.max}):`));
            
            if (!amount || amount < selectedPlan.min || amount > selectedPlan.max) {
                showNotification('error', `Amount must be between $${selectedPlan.min} and $${selectedPlan.max}`);
                return;
            }

            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const userIndex = users.findIndex(u => u.email === currentUser.email);
            
            if (userIndex !== -1) {
                const investment = {
                    id: Date.now(),
                    plan: plan.charAt(0).toUpperCase() + plan.slice(1),
                    amount: amount,
                    startDate: new Date().toISOString(),
                    endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),
                    dailyReturn: selectedPlan.dailyReturn,
                    status: 'active'
                };

                users[userIndex].investments.push(investment);
                localStorage.setItem('users', JSON.stringify(users));
                
                showNotification('success', `Successfully invested $${amount} in ${investment.plan} Plan`);
                updateDashboardData();
            }
        }

        // Crypto Address Management
        async function loadCryptoAddresses() {
            try {
                const response = await fetch('/api/crypto-addresses');
                const addresses = await response.json();
                
                // Set in admin panel
                document.getElementById('adminBtcAddress').value = addresses.BTC || '';
                document.getElementById('adminEthAddress').value = addresses.ETH || '';
                document.getElementById('adminUsdtAddress').value = addresses.USDT || '';
                document.getElementById('adminUsdcAddress').value = addresses.USDC || '';
            } catch (error) {
                // Use localStorage fallback
                const addresses = JSON.parse(localStorage.getItem('cryptoAddresses') || '{}');
                
                if (!addresses.BTC) {
                    addresses.BTC = 'bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh';
                    addresses.ETH = '0x71C7656EC7ab88b098defB751B7401B5f6d8976F';
                    addresses.USDT = 'TYASr8UVgUoSdxMJ5rS8H3dLF9BkTrBw1y';
                    addresses.USDC = '0x71C7656EC7ab88b098defB751B7401B5f6d8976F';
                    localStorage.setItem('cryptoAddresses', JSON.stringify(addresses));
                }
                
                document.getElementById('adminBtcAddress').value = addresses.BTC;
                document.getElementById('adminEthAddress').value = addresses.ETH;
                document.getElementById('adminUsdtAddress').value = addresses.USDT;
                document.getElementById('adminUsdcAddress').value = addresses.USDC;
            }
        }

        async function saveCryptoAddresses() {
            if (!isAdmin) {
                showNotification('error', 'Admin access required');
                return;
            }

            const addresses = {
                BTC: document.getElementById('adminBtcAddress').value,
                ETH: document.getElementById('adminEthAddress').value,
                USDT: document.getElementById('adminUsdtAddress').value,
                USDC: document.getElementById('adminUsdcAddress').value
            };

            try {
                const response = await fetch('/api/crypto-addresses', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ addresses })
                });
                
                const data = await response.json();
                if (data.success) {
                    localStorage.setItem('cryptoAddresses', JSON.stringify(addresses));
                    showNotification('success', 'Crypto addresses updated successfully!');
                }
            } catch (error) {
                localStorage.setItem('cryptoAddresses', JSON.stringify(addresses));
                showNotification('success', 'Crypto addresses updated locally!');
            }
        }

        async function processDeposit() {
            if (!currentUser) return;

            const amount = parseFloat(document.getElementById('depositAmount').value);
            const currency = document.getElementById('depositCurrency').value;
            
            if (!amount || amount < 100) {
                showNotification('error', 'Minimum deposit is $100');
                return;
            }

            try {
                const response = await fetch('/api/crypto-addresses');
                const addresses = await response.json();
                const address = addresses[currency];
                
                document.getElementById('cryptoAddresses').innerHTML = `
                    <div class="alert alert-info mt-3">
                        <p>Send <strong>$${amount} worth of ${currency}</strong> to:</p>
                        <p class="deposit-address">${address}</p>
                        <p class="small text-muted">Network: ${currency === 'USDT' ? 'TRC20' : currency === 'BTC' ? 'Bitcoin' : 'ERC20'}</p>
                        <p class="small text-muted">Your deposit will be credited after 3 confirmations</p>
                    </div>
                `;

                // Simulate deposit after 5 seconds
                setTimeout(() => {
                    const users = JSON.parse(localStorage.getItem('users') || '[]');
                    const userIndex = users.findIndex(u => u.email === currentUser.email);
                    
                    if (userIndex !== -1) {
                        users[userIndex].balance += amount;
                        users[userIndex].transactions.push({
                            type: 'deposit',
                            amount: amount,
                            date: new Date().toISOString(),
                            currency: currency
                        });
                        localStorage.setItem('users', JSON.stringify(users));
                        updateDashboardData();
                        showNotification('success', `Deposit of $${amount} received!`);
                    }
                }, 5000);
            } catch (error) {
                showNotification('error', 'Failed to load crypto addresses');
            }
        }

        function processWithdrawal() {
            if (!currentUser) return;

            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const wallet = document.getElementById('withdrawWallet').value;
            
            if (!amount || amount < 50) {
                showNotification('error', 'Minimum withdrawal is $50');
                return;
            }

            if (!wallet) {
                showNotification('error', 'Please enter wallet address');
                return;
            }

            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const userIndex = users.findIndex(u => u.email === currentUser.email);
            
            if (userIndex !== -1 && users[userIndex].balance >= amount) {
                users[userIndex].balance -= amount;
                users[userIndex].transactions.push({
                    type: 'withdrawal',
                    amount: amount,
                    date: new Date().toISOString(),
                    wallet: wallet,
                    status: 'processing'
                });
                localStorage.setItem('users', JSON.stringify(users));
                
                updateDashboardData();
                showNotification('success', `Withdrawal request for $${amount} submitted! Processing time: 5-10 minutes.`);
                
                // Simulate successful withdrawal notification
                setTimeout(() => {
                    showLiveNotification(`${currentUser.firstName} successfully withdrew $${amount.toLocaleString()}`);
                }, 3000);
            } else {
                showNotification('error', 'Insufficient balance');
            }
        }

        // AI Chat Functions
        function showAIChat() {
            if (!currentUser) {
                showAuthModal('login');
                return;
            }
            const modal = new bootstrap.Modal(document.getElementById('aiChatModal'));
            modal.show();
        }

        async function sendAIMessage() {
            const message = document.getElementById('chatInput').value;
            if (!message.trim()) return;

            // Add user message
            addChatMessage('user', message);
            document.getElementById('chatInput').value = '';

            // AI Response
            setTimeout(() => {
                let response = '';
                
                if (message.toLowerCase().includes('support') || message.toLowerCase().includes('problem') || message.toLowerCase().includes('help')) {
                    response = "I've forwarded your concern to our support team. They will contact you at your registered email within 24 hours. For immediate assistance, please email: stevenlogan362@gmail.com";
                    
                    // Send complaint to server
                    sendComplaintToServer(message);
                } else if (message.toLowerCase().includes('deposit') || message.toLowerCase().includes('address')) {
                    const addresses = JSON.parse(localStorage.getItem('cryptoAddresses') || '{}');
                    response = `For deposits, please use these addresses:
                    BTC: ${addresses.BTC || 'Not set'}
                    ETH: ${addresses.ETH || 'Not set'}
                    USDT: ${addresses.USDT || 'Not set'}`;
                } else if (message.toLowerCase().includes('trade') || message.toLowerCase().includes('buy') || message.toLowerCase().includes('sell')) {
                    response = getTradingAdvice();
                } else {
                    response = getGenericResponse();
                }
                
                addChatMessage('ai', response);
            }, 1000);
        }

        async function sendComplaintToServer(message) {
            try {
                await fetch('/api/ai-complaint', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userEmail: currentUser.email,
                        message: message
                    })
                });
            } catch (error) {
                // Save locally if server fails
                const complaints = JSON.parse(localStorage.getItem('aiComplaints') || '[]');
                complaints.push({
                    user: currentUser.email,
                    message: message,
                    date: new Date().toISOString(),
                    status: 'pending'
                });
                localStorage.setItem('aiComplaints', JSON.stringify(complaints));
            }
        }

        function addChatMessage(sender, message) {
            const bubbleClass = sender === 'user' ? 'user-message' : 'ai-message';
            const senderName = sender === 'user' ? 'You' : 'AI Assistant';
            
            const messageHtml = `
                <div class="${bubbleClass} ai-chat-bubble mb-3">
                    <strong>${senderName}:</strong> ${message}
                </div>
            `;
            
            document.getElementById('chatMessages').insertAdjacentHTML('beforeend', messageHtml);
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
        }

        function getTradingAdvice() {
            const advice = [
                "Based on current market analysis, I recommend a BUY position on BTC with target at $65,000. Stop loss at $62,500.",
                "Market sentiment is bullish. Consider opening long positions on major cryptocurrencies with 2% risk per trade.",
                "EUR/USD shows bearish momentum. Short position recommended with target at 1.0750.",
                "Our AI signals indicate STRONG BUY for ETH with projected 8% gain in next 24 hours.",
                "Market volatility is high. Recommend reducing position sizes and using tighter stop losses."
            ];
            return advice[Math.floor(Math.random() * advice.length)];
        }

        function getGenericResponse() {
            const responses = [
                "I'm here to help with trading advice, market analysis, or platform assistance. What specific help do you need?",
                "For optimal results, consider diversifying your portfolio across multiple investment plans.",
                "Our AI trading system has an 89% success rate. Would you like me to explain how it works?",
                "Remember to always invest responsibly and never risk more than you can afford to lose.",
                "The platform offers automated trading to generate consistent profits. Would you like to know more?"
            ];
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Admin Functions
        function showAdminPanel() {
            if (!isAdmin) {
                showNotification('error', 'Admin access required');
                return;
            }
            
            loadAdminData();
            const modal = new bootstrap.Modal(document.getElementById('adminPanelModal'));
            modal.show();
        }

        function showAdminTab(tabName) {
            // Hide all tabs
            document.getElementById('adminCryptoTab').style.display = 'none';
            document.getElementById('adminUsersTab').style.display = 'none';
            document.getElementById('adminEmailTab').style.display = 'none';
            
            // Show selected tab
            document.getElementById('admin' + tabName.charAt(0).toUpperCase() + tabName.slice(1) + 'Tab').style.display = 'block';
        }

        function loadAdminData() {
            // Load users
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const usersHtml = users.map(user => `
                <tr>
                    <td>${user.id}</td>
                    <td>${user.firstName} ${user.lastName}</td>
                    <td>${user.email}</td>
                    <td>$${user.balance?.toLocaleString() || '0'}</td>
                    <td><span class="badge bg-success">Active</span></td>
                    <td>
                        <button class="btn btn-sm btn-info" onclick="editUser('${user.email}')">Edit</button>
                        <button class="btn btn-sm btn-warning" onclick="resetPassword('${user.email}')">Reset PW</button>
                    </td>
                </tr>
            `).join('');
            document.getElementById('usersTable').innerHTML = usersHtml;

            // Populate email user select
            const emailSelect = document.getElementById('emailUserSelect');
            emailSelect.innerHTML = '<option value="all">All Users</option>' + 
                users.map(user => `<option value="${user.email}">${user.email}</option>`).join('');
        }

        async function sendBulkEmail() {
            const userEmail = document.getElementById('emailUserSelect').value;
            const subject = document.getElementById('emailSubject').value;
            const message = document.getElementById('emailMessage').value;

            if (!subject || !message) {
                showNotification('error', 'Please fill all fields');
                return;
            }

            try {
                const response = await fetch('/api/send-email', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        to: userEmail === 'all' ? 'all@globaltrade360.com' : userEmail,
                        subject,
                        message
                    })
                });

                const data = await response.json();
                if (data.success) {
                    showNotification('success', `Email queued for delivery to ${userEmail === 'all' ? 'all users' : userEmail}`);
                    document.getElementById('emailSubject').value = '';
                    document.getElementById('emailMessage').value = '';
                }
            } catch (error) {
                showNotification('success', `Email simulated for ${userEmail === 'all' ? 'all users' : userEmail} (Check console for server errors)`);
            }
        }

        // Market Data Functions
        function initializeMarketData() {
            // Create trading chart
            const ctx = document.createElement('canvas');
            document.getElementById('tradingChart').appendChild(ctx);
            
            new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: Array.from({length: 24}, (_, i) => `${i}:00`),
                    datasets: [{
                        label: 'BTC/USD',
                        data: Array.from({length: 24}, () => Math.random() * 1000 + 63000),
                        borderColor: '#FFD700',
                        backgroundColor: 'rgba(255, 215, 0, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#94a3b8' }
                        },
                        x: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#94a3b8' }
                        }
                    }
                }
            });

            // Update prices every 3 seconds
            setInterval(updateMarketPrices, 3000);
        }

        async function updateMarketPrices() {
            try {
                const response = await fetch('/api/market-data');
                const data = await response.json();
                
                marketData.btc = parseFloat(data.btc);
                marketData.eth = parseFloat(data.eth);
                marketData.eur = parseFloat(data.eur);

                document.getElementById('btcPrice').textContent = '$' + marketData.btc.toFixed(2);
                document.getElementById('ethPrice').textContent = '$' + marketData.eth.toFixed(2);
                document.getElementById('eurPrice').textContent = marketData.eur.toFixed(4);

                // Add random profit animation
                if (Math.random() > 0.7) {
                    showProfitAnimation();
                }
            } catch (error) {
                // Fallback to local updates
                marketData.btc += (Math.random() - 0.5) * 100;
                marketData.eth += (Math.random() - 0.5) * 20;
                marketData.eur += (Math.random() - 0.5) * 0.01;

                document.getElementById('btcPrice').textContent = '$' + marketData.btc.toFixed(2);
                document.getElementById('ethPrice').textContent = '$' + marketData.eth.toFixed(2);
                document.getElementById('eurPrice').textContent = marketData.eur.toFixed(4);

                if (Math.random() > 0.7) {
                    showProfitAnimation();
                }
            }
        }

        // Live Notifications
        function startLiveNotifications() {
            // Show initial notification
            setTimeout(() => {
                showLiveNotification("Michael K. just made $5,240 profit from Bitcoin trading!");
            }, 2000);

            // Schedule random notifications
            setInterval(() => {
                const notifications = [
                    "Sarah J. successfully withdrew $12,500 to her bank account!",
                    "David L. earned $3,200 profit from Pro Plan investment!",
                    "New user registered with $5,000 initial deposit!",
                    "VIP member achieved 7.8% daily return on investment!",
                    "Instant withdrawal processed for $8,750!",
                    "AI trading system generated 92% accurate signals today!",
                    "Platform reaches $4.2B total trading volume!",
                    "User earned $45,000 total profit this month!"
                ];
                const randomNotif = notifications[Math.floor(Math.random() * notifications.length)];
                showLiveNotification(randomNotif);
            }, 15000);
        }

        function showLiveNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'glass-card p-3 live-notification';
            notification.innerHTML = `
                <div class="d-flex align-items-center">
                    <div class="profit-badge me-3">
                        <i class="fas fa-bolt me-1"></i> LIVE
                    </div>
                    <div>
                        <p class="mb-0 small">${message}</p>
                        <small class="text-muted">Just now</small>
                    </div>
                    <button class="btn-close btn-close-white ms-3" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;
            
            document.getElementById('liveNotifications').appendChild(notification);
            
            // Remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }

        function showProfitAnimation() {
            const tradingView = document.getElementById('tradingChart');
            const profit = document.createElement('div');
            profit.className = 'profit-animation';
            profit.textContent = '+' + (Math.random() * 2 + 0.5).toFixed(2) + '%';
            
            const x = Math.random() * 80 + 10;
            profit.style.left = x + '%';
            profit.style.bottom = '10px';
            
            tradingView.appendChild(profit);
            
            setTimeout(() => {
                if (profit.parentNode) {
                    profit.remove();
                }
            }, 3000);
        }

        // Profit Accumulation System
        function startProfitAccumulation() {
            setInterval(() => {
                if (!currentUser || isAdmin) return;
                
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const userIndex = users.findIndex(u => u.email === currentUser.email);
                
                if (userIndex !== -1 && users[userIndex].investments.length > 0) {
                    let totalProfit = 0;
                    
                    users[userIndex].investments.forEach(inv => {
                        if (inv.status === 'active') {
                            const dailyProfit = inv.amount * inv.dailyReturn / 86400; // Per second
                            const profit = dailyProfit * (Math.random() * 0.5 + 0.75); // Random factor
                            totalProfit += profit;
                            
                            inv.profit = (inv.profit || 0) + profit;
                        }
                    });
                    
                    if (totalProfit > 0) {
                        users[userIndex].balance += totalProfit;
                        users[userIndex].transactions.push({
                            type: 'profit',
                            amount: totalProfit,
                            date: new Date().toISOString()
                        });
                        
                        localStorage.setItem('users', JSON.stringify(users));
                        
                        // Update dashboard if open
                        if (document.getElementById('dashboardModal').classList.contains('show')) {
                            updateDashboardData();
                        }
                    }
                }
            }, 3000); // Update every 3 seconds
        }

        // Utility Functions
        function showNotification(type, message) {
            const alertClass = type === 'success' ? 'alert-success' : 
                              type === 'error' ? 'alert-danger' : 'alert-info';
            
            const notification = document.createElement('div');
            notification.className = `alert ${alertClass} alert-dismissible fade show position-fixed`;
            notification.style.cssText = 'top: 80px; right: 20px; z-index: 1050; max-width: 300px;';
            notification.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 3000);
        }

        // Platform statistics (for admin)
        function getTotalPlatformBalance() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            return users.reduce((total, user) => total + (user.balance || 0), 0);
        }

        function getActiveInvestmentsCount() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            return users.reduce((total, user) => total + user.investments.filter(i => i.status === 'active').length, 0);
        }

        function getTotalPlatformProfit() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            return users.reduce((total, user) => total + calculateTotalProfit(user), 0);
        }

        function getTodayPlatformProfit() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const today = new Date().toISOString().split('T')[0];
            
            return users.reduce((total, user) => {
                return total + user.transactions
                    .filter(t => t.type === 'profit' && t.date.includes(today))
                    .reduce((sum, t) => sum + t.amount, 0);
            }, 0);
        }

        // Demo functions
        function showDemo() {
            showNotification('info', 'Demo mode activated. You can explore all features.');
            currentUser = {
                firstName: 'Demo',
                lastName: 'User',
                email: 'demo@globaltrade360.com',
                balance: 5000,
                investments: [
                    {
                        plan: 'Pro',
                        amount: 2500,
                        startDate: new Date().toISOString(),
                        endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),
                        profit: 320,
                        status: 'active'
                    }
                ]
            };
            updateUIAfterLogin();
        }

        function showSupport() {
            showNotification('info', 'Contact support at: stevenlogan362@gmail.com');
        }

        // Initialize demo data
        function initializeDemoData() {
            if (!localStorage.getItem('users')) {
                const demoUsers = [
                    {
                        id: 1,
                        firstName: 'John',
                        lastName: 'Doe',
                        email: 'john@example.com',
                        password: 'password123',
                        balance: 12500,
                        investments: [
                            {
                                id: 101,
                                plan: 'Pro',
                                amount: 5000,
                                startDate: '2024-01-15',
                                endDate: '2024-03-15',
                                dailyReturn: 0.048,
                                profit: 1250,
                                status: 'active'
                            }
                        ],
                        transactions: [],
                        joinDate: '2024-01-01'
                    }
                ];
                localStorage.setItem('users', JSON.stringify(demoUsers));
            }
        }

        // Initialize when page loads
        initializeDemoData();
    </script>
</body>
</html>
